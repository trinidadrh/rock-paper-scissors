<!DOCTYPE html>
<html>
<head>
  <title>Page Title</title>
  <meta charset="UTF-8"/>
</head>
<body>

<h4>Are you ready to play...</h4>
<h1>ROCK PAPER SCISSORS?!</h1>
<h3>If so, start each round by clicking a button below:</h3>

<button id="btn1">Rock</button>
<button id="btn2">Paper</button>
<button id="btn3">Scissors</button>

<div id="container"></div>

<script>

let playerScore = 0;
let computerScore = 0;

// Tallies number of games won by player and computer 
// Declares winner if a score reaches 5
function runningTally(a) {
  if (a == "player") {
    let pScore = playerScore;
    pScore += 1;
    console.log(pScore);
    if (pScore == 5) {
      let body = document.getElementById("body");
      document.body.innerHTML = "";
      document.body.innerHTML = "<h3>'You win. Congrats. Refresh page to play again.</h3>";
    }
  } else if (a == "computer") {
    let cScore = computerScore;
    cScore += 1;
    console.log(cScore);
    if (cScore == 5) {
      let body = document.getElementById("body");
      document.body.innerHTML = "";
      document.body.innerHTML = "<h3>'The computer wins. Refresh page to play again.</h3>";
    }
  }
}

// Computer selects rock, paper or scissors
function computerPlay() {
  let choices = ['rock', 'paper', 'scissors'];
  return choices[Math.floor(Math.random() * choices.length)];
} 

// One round of the game
function playRound(playerSelection, computerSelection) {

  let firstCapitalizedPlayer = playerSelection.charAt(0).toUpperCase() + playerSelection.slice(1);
  let firstCapitalizedComputer = computerSelection.charAt(0).toUpperCase() + computerSelection.slice(1);
  if (playerSelection == computerSelection) {
    return ("It's a DRAW!");
  } else if (playerSelection == "paper" && computerSelection == "rock") {
      return ("You WIN! " + firstCapitalizedPlayer + " beats " + firstCapitalizedComputer);
      runningTally(player);
  } else if (playerSelection == "rock" && computerSelection == "scissors") {
      return ("You WIN! " + firstCapitalizedPlayer + " beats " + firstCapitalizedComputer);
      runningTally(player);
  } else if (playerSelection == "scissors" && computerSelection == "paper") {
      return ("You WIN! " + firstCapitalizedPlayer + " beats " + firstCapitalizedComputer);
      runningTally(player);
  } else {
      return ("You LOSE! " + firstCapitalizedComputer + " beats " + firstCapitalizedPlayer);
      runningTally(computer);
    }
  computerPlay();
}

// Player chooses "rock" to start another round of game
const btn1 = document.querySelector("#btn1");
btn1.addEventListener("click", function (e) {
  let playerPrompt = "rock";
  let playerSelection = playerPrompt;
  let computerSelection = computerPlay();
  playerChoice = playerSelection;
  playerChoice = computerSelection;

  console.log("You: " + playerSelection);
  console.log("Computer: " + computerSelection);
  console.log(playRound(playerSelection, computerSelection));
});

// Player chooses "paper" to start another round of game
const btn2 = document.querySelector("#btn2");
btn2.addEventListener("click", function (e) {
  let playerPrompt = "paper";
  let playerSelection = playerPrompt;
  let computerSelection = computerPlay();
  playerChoice = playerSelection;
  playerChoice = computerSelection;

  console.log("You: paper");
  console.log("Computer: " + computerSelection);
  console.log(playRound(playerSelection, computerSelection));
});

// Player chooses "scissors" to start another round of game
const btn3 = document.querySelector("#btn3");
btn3.addEventListener("click",  function (e) {
  let playerPrompt = "scissors";
  let playerSelection = playerPrompt;
  let computerSelection = computerPlay();
  playerChoice = playerSelection;
  playerChoice = computerSelection;

  console.log("You: " + playerSelection);
  console.log("Computer: " + computerSelection);
  console.log(playRound(playerSelection, computerSelection)); 

});

// Contains scores for all scores
const container = document.querySelector("#container");

// Container for round score
const thisRound = document.createElement("h3");
thisRound.classList.add("thisRound");
thisRound.textContent = "The results for this round:";
thisRound.style.color = "blue";
thisRound.style.backgroundColor = "yellow";
thisRound.style.borderStyle = "solid";
container.appendChild(thisRound);

// Shows player score for round
const showYourScore = document.createElement("p");
showYourScore.classList.add("yourScore");
showYourScore.textContent = "You: " + //playerSelection;
thisRound.appendChild(showYourScore); 

// Shows computer score for round
const showCompScore = document.createElement("p");
showCompScore.classList.add("compScore");
showCompScore.textContent = "Computer: " + //computerSelection;
thisRound.appendChild(showCompScore); 

// Shows win tallies for the whole game
const Tally = document.createElement("h3");
Tally.classList.add("runningTally");
Tally.textContent = "You've won " + playerScore + " games and the computer has won " + computerScore + ".";
container.appendChild(Tally);

</script>
</body>
</html>